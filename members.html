<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <!-- Title for the tab in browser -->
    <title>Sigma Phi Delta</title>

    <!-- Logo for the tab in browser -->
    <link rel="shortcut icon" href="images/symbols/spdlogo.jpg">

    <!-- Jquery Plugin -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

    <!-- Load in the javascript file -->
    <script language="javascript" type="text/javascript" src="js/index.js"></script>

    <!-- Load in the CSS file -->
    <link rel="stylesheet" type="text/css" href="css/index.css">

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    <!-- Icons -->
    <link rel="stylesheet" type="text/css" href="icons/flaticon.css">

    <!-- Color Animations -->
    <script src="js/jquery.color.js"></script>

    <!-- Masonry -->
    <script src="js/masonry.pkgd.min.js"></script>

    <!-- Masonry Isotope -->
    <script src="js/isotope.pkgd.min.js"></script>


    <script type="text/javascript">

        // Parses a google spreadsheet and dynamically creates HTML elements with information from the spreadsheet
        var spData = null;
        function doData(json) {
            spData = json.feed.entry;
        }

        function drawCell(container, val, c) {

            /*
            var td = $("<div>");
            container.append(td);
            td.append(val);
            var tv = $("</div>");
            container.append(tv);
            return td;
             */
            var input;
            var start = $("<div>");
            var end = $("</div>");

            switch(c){
                case 0:
                    input = $('<div style="font-family: Lato, sans-serif;" class="fontSize24">' + val + '</div>');
                    container.append(input);
                    break;
                case 1:
                    input = $('<div class="roboto" style="">Major: ' + val + '</div>');
                    container.append(input);
                    break;
                case 2:
                    input = $('<div class="roboto" style="">Pledge Class: ' + val + '</div>');
                    container.append(input);
                    break;
                case 3:
                    input = $('<div class="roboto" style="">Hometown: ' + val + '</div>');
                    container.append(input);
                    break;
                case 4:
                    input = $('<div class="roboto" style="">Position: ' + val + '</div>');
                    container.append(input);
                    break;
                case 5:
                    input = $('<div class="roboto" style="">Graduation Date: ' + val + '</div>');
                    container.append(input);
                    break;
                case 6:
                    input = $('<div class="roboto" style="">Description: ' + val + '</div>');
                    container.append(input);
                    break;
                case 7:
                    input = $('<div class="roboto" style="">Membership: ' + val + '</div>');
                    container.append(input);
                    break;
                case 8:
                    input = $('<div class="roboto" style="">Company + Position: ' + val + '</div>');
                    container.append(input);
                    break;
                case 9:
                        if (val != 'FALSE'){
                            input = $('<div style="max-height: 300px; overflow: hidden;"><img src="' + val +  '" width="100%" /></div>');

                        }
                        else{
                            input = $('<div class="roboto" style="">Picture: ' + val + '</div>');
                        }
                    container.append(input);
                    break;
            }
        }
        function drawRow(parent, rowData) {
            if (rowData == null) return null;
            if (rowData.length == 0) return null;
            var tr = $("<div class='inlineBlock backColWhite bordRad5 grid-item roboto' data-top='false' style=' text-align: left; width: 250px;margin: 20px;'>");
            parent.append(tr);

            /*for(var c=0; c<rowData.length; c++) {
                drawCell(tr, rowData[c], c);
            }
             */

            if (rowData[4]!= 'FALSE'){
                var divHeader = $(
                        '<div class="" style="padding: 5px 8px 5px 8px;"> ' +
                        '<div class="fontSize24" style="font-family: Lato; padding: 3px auto;">' + rowData[0] + '</div>' +
                        '<div class="fontSize14">'+rowData[4] +'</div>' +
                        '</div>');
            }
            else{
                var divHeader = $(
                        '<div class="" style="padding: 5px 8px 5px 8px;"> ' +
                        '<div class="fontSize24" style="font-family: Lato; padding: 3px auto;">' + rowData[0] + '</div>' +
                        '</div>');
            }

            tr.append(divHeader);


            if (rowData[9] != 'FALSE'){
                if(rowData[10] == 'TRUE'){
                    var divPicture = $(
                            '<div class="pad0"> ' +
                            '<div class="overflowHidden" style="max-height: 350px;"><img src="' + rowData[9] +  '" width="100%" /></div>' +
                            '</div>');
                    tr.append(divPicture);
                }else{
                    var divPicture = $(
                            '<div class="pad0"> ' +
                            '<div class="overflowHidden" style="max-height: 300px;"><img src="' + rowData[9] +  '" width="100%" /></div>' +
                            '</div>');
                    tr.append(divPicture);
                }

            }

            var divContent = $(
                    '<div class="" style="padding: 5px 0 5px 0;line-height: 35px;"> ' +
                        '<div class="" style="">' +
                            '<div id="class" class="categ centerVert"><div><div class="cmCont colWhite boldText inlineBlock centerText fontSize18 selCat" style="line-height: 37px; margin: 3px auto;">&' + rowData[2] + ';</div>' + '<div class="classCat inlineBlock" style="padding-left: 10px;">' + rowData[2] + '</div></div></div>' +
                            '<div id="major" class="categ centerVert"><div><div class="cmCont colWhite boldText inlineBlock centerText fontSize13 selCat" style="line-height: 37px; margin: 3px auto;">' + rowData[1] + '</div>' + '<div class="majorCat inlineBlock" style="padding-left: 10px;">' + getMajorLong(rowData[1]) + '</div></div></div>' +
                            '<div id="membership" class="categ centerVert"><div><div class="cmCont colWhite boldText inlineBlock centerText fontSize10" style="line-height: 37px; margin: 3px auto;">' + rowData[5] + '</div>' + '<div class="memberCat inlineBlock selCat" style="padding-left: 10px;">' + rowData[7] + '</div></div></div>' +
                            '<div id="hometown" class="categ centerVert"><div><div class="cmCont colWhite boldText inlineBlock centerText fontSize10" style="line-height: 37px; margin: 3px auto;"><div class="flaticon-house34 posRel" style="right: 13px;"></div></div>' + '<div class="inlineBlock posRel" style="padding-left: 10px;bottom: 3px;">' + rowData[3] + '</div></div></div>' +
                        '</div>' +
                    '</div>');
            tr.append(divContent);

            if (rowData[6] != 'FALSE'){
                var divDescription = $(
                        '<div class="" style="padding: 5px 8px 5px 8px;line-height: 20px;">' + rowData[6] + ' </div>');
                tr.append(divDescription);
            }

            var end = $("</div>");
            parent.append(end);
        }
        function getMajorLong(major){
            if      (major=='ESG')                      {  return 'Engineering Science';                                        }
            else if (major=='CIV')                      {  return 'Civil Engineering';                                          }
            else if (major=='CE')                       {  return 'Computer Engineering';                                       }
            else if (major=='CSE' || major=='CS')       {  return 'Computer Science';                                           }
            else if (major=='ISE' || major=='IS')       {  return 'Information Systems';                                        }
            else if (major=='MEC' || major=='ME')       {  return 'Mechanical Engineering';                                     }
            else if (major=='AMS' )                     {  return '<div class="fontSize14">Applied Math and Statistics</div>';  }
            else if (major=='ES' )                      {  return 'Environmental Science';                                      }
            else if (major=='TSM' )                     {  return '<div class="fontSize14">Technical Systems Mgmt.</div>'; }
            else                                        {  return '';                                                           }
        }

        //function drawTable(parent) {
        //    var table = $("<table/>");
        //    parent.append(table);
        //    return table;
        //}

        function readData(parent) {
            var data = spData;
            //var table = drawTable(parent);
            var rowData = [];

            for(var r=0; r<data.length; r++) {
                var cell = data[r]["gs$cell"];
                var val = cell["$t"];
                if (cell.col == 1) {
                    drawRow(parent, rowData);
                    rowData = [];
                }
                rowData.push(val);
            }
            drawRow(parent, rowData);
        }
        $(document).ready(function(){
            readData($("#data"));

            $('.categ').click(function(){
                var val = $(this).find('.selCat').html();
                var cat = this.id;

                var catVal=0;
                if      (cat == 'class')        {  catVal = 0;  }
                else if (cat == 'major')        {  catVal = 1;  }
                else if (cat == 'membership')   {  catVal = 2;  }
                else                            {  catVal = -1; }

                if (catVal >= 0){
                    var elements = document.getElementsByClassName('grid-item');
                    for(var i=0;i<elements.length;i++){
                        if (elements[i].getElementsByClassName('selCat')[catVal].innerHTML != val){
                            elements[i].style.opacity = '0.5';
                            elements[i].setAttribute('data-top', 'true');
                        }
                        else{
                            elements[i].style.opacity = '1';
                            elements[i].setAttribute('data-top', 'false');
                        }
                    }
                    $('#data').isotope('updateSortData').isotope();
                }
            });
        });

        // For the loading gif
        document.onreadystatechange = function () {
            var state = document.readyState;
            if (state == 'interactive') {
                document.getElementById('contents').style.visibility="hidden";
            } else if (state == 'complete') {
                setTimeout(function(){
                    document.getElementById('interactive');
                    document.getElementById('load').style.visibility="hidden";
                    document.getElementById('contents').style.visibility="visible";
                },1000);
            }
        };

    </script>
    <script src="https://spreadsheets.google.com/feeds/cells/1ZzVZpDJh6x55HRXbUJpfrdHFPyQDzU05eIN1RJe43ds/1/public/values?alt=json-in-script&callback=doData"></script>

    <!-- Masonry Plugin -->
    <script>
        $(window).on('load', function(){

            function parseClass(classCat){
                if      (classCat == 'Alpha')       {  return 0;    }
                else if (classCat == 'Beta')        {  return 1;    }
                else if (classCat == 'Gamma')       {  return 2;    }
                else if (classCat == 'Delta')       {  return 3;    }
                else if (classCat == 'Epsilon')     {  return 4;    }
                else if (classCat == 'Zeta')        {  return 5;    }
                else if (classCat == 'Eta')         {  return 6;    }
                else if (classCat == 'Theta')       {  return 7;    }
                else if (classCat == 'Iota')        {  return 8;    }
                else if (classCat == 'Kappa')       {  return 9;    }
                else if (classCat == 'Lambda')      {  return 10;   }
            }

            var $grid = $('#data').isotope({
                itemSelector: '.grid-item',
                getSortData: {
                    top: '[data-top]',
                    major: '.majorCat',
                    membership: '.memberCat',
                    classCat: function( itemElem ) {
                        var weight = $( itemElem ).find('.classCat').text();
                        return parseClass(weight);
                    }
                },
                sortBy: 'top'
            });
        });
    </script>

    <!-- CSS for resizing the number of columns for the page width -->
    <style>
        @media all and (min-width:300px) {  #membersContainer{  width: 300px;  }   #load{left:-5%;} }
        @media all and (min-width:600px) {  #membersContainer{  width: 590px;  }   #load{left: -3%;}  }
        @media all and (min-width:900px) {  #membersContainer{  width: 880px;  }   #load{left: 0;}  }
        @media all and (min-width:1200px) {  #membersContainer{  width: 1170px;  } #load{left: 13%;}   }
        @media all and (min-width:1500px) {  #membersContainer{  width: 1460px;  } #load{left: 19%;}  }
        @media all and (min-width:1800px) {  #membersContainer{  width: 1750px;  } #load{left: 25%;}  }x
    </style>

</head>

<body id="pageone" class="posRel width100 height100 overflowXHidden backColBackGround marg0 pad0">
<!-- Header -->
<div id="header"></div>

<!-- Content -->
<div id="membersContainer" class="posRel centerText" style="margin: 35px auto 120px auto; min-height: 530px;">

    <div id="load">
        <img src="images/symbols/loading.gif" height="200px" width="200px"/>
    </div>

    <div id="contents">
        <!-- I don't know why this needs a padding left -> Added bordRed, evens out the DIV -->
        <div id="data" class="centerText centerDiv" style="padding: 0 0 0 3px;"></div>
    </div>

</div>

<!-- Footer -->
<div id="footer"></div>
</body>
</html>
